# generated by mxlims/scripts
#  filename ReflectionSet.py

from __future__ import annotations
from typing import Optional, Union
from ..core.Dataset import Dataset
from ..data.DatasetData import DatasetData
from ..data.ReflectionSetData import ReflectionSetData
from .Crystal import Crystal
from .DropRegion import DropRegion
from .MxExperiment import MxExperiment
from .MxProcessing import MxProcessing
from .Pin import Pin
from .PinPosition import PinPosition
from .PlateWell import PlateWell
from .WellDrop import WellDrop

class ReflectionSet(ReflectionSetData, DatasetData, Dataset):
    """MXLIMS pydantic model class for ReflectionSet
    """
    
    @property
    def derived_datasets(self) -> list[ReflectionSet]:
        """getter for ReflectionSet.derived_datasets list"""
        uid = self.uuid
        result = []
        for obj in self.objects_by_id["Dataset"]:
            if uid == obj.derived_from_id:
                result.append(obj)
        return result
    
    @property
    def derived_from(self) -> Optional[ReflectionSet]:
        """getter for ReflectionSet.derived_from"""
        return self.objects_by_id["Dataset"].get(self.derived_from_id)
    
    @property
    def logistical_sample(self) -> Optional[Union[Crystal, DropRegion, Pin, PinPosition, PlateWell, WellDrop]]:
        """getter for ReflectionSet.logistical_sample"""
        return self.objects_by_id["LogisticalSample"].get(self.logistical_sample_id)
    
    @logistical_sample.setter
    def logistical_sample(self, value: Optional[Union[Crystal, DropRegion, Pin, PinPosition, PlateWell, WellDrop]]):
        """setter for ReflectionSet.logistical_sample"""
        if value:
            if not isinstance(value, Union[Crystal, DropRegion, Pin, PinPosition, PlateWell, WellDrop]):
                raise ValueError(
                    "logistical_sample must be of type Union[Crystal, DropRegion, Pin, PinPosition, PlateWell, WellDrop]"
                )
            self.logistical_sample_id = value.uuid
        else:
            self.logistical_sample_id = None

    @property
    def reference_for(self) -> list[Union[MxExperiment, MxProcessing]]:
        """getter for ReflectionSet.reference_for list"""
        uid = self.uuid
        result = []
        for obj in self.objects_by_id["Job"]:
            if uid in obj.reference_data_ids:
                result.append(obj)
        return result
    
    @property
    def source(self) -> Optional[MxProcessing]:
        """getter for ReflectionSet.source"""
        return self.objects_by_id["Job"].get(self.source_id)
    
    @property
    def template_for(self) -> list[MxProcessing]:
        """getter for ReflectionSet.template_for list"""
        uid = self.uuid
        result = []
        for obj in self.objects_by_id["Job"]:
            if uid in obj.template_data_ids:
                result.append(obj)
        return result
    